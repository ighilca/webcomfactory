<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diagnostic Routage - WebcomFactory</title>
    <style>
        body { font-family: 'Courier New', monospace; margin: 20px; background: #1e1e1e; color: #d4d4d4; }
        .container { max-width: 1000px; margin: 0 auto; }
        .header { background: #2d2d30; padding: 20px; border-radius: 5px; margin-bottom: 20px; }
        .section { background: #252526; padding: 20px; border-radius: 5px; margin-bottom: 20px; border-left: 4px solid #007acc; }
        .error { border-left-color: #f44336; }
        .success { border-left-color: #4caf50; }
        .warning { border-left-color: #ff9800; }
        .code { background: #1e1e1e; padding: 15px; border-radius: 3px; border: 1px solid #3e3e42; overflow-x: auto; }
        .test-result { padding: 10px; margin: 10px 0; border-radius: 3px; }
        .test-success { background: #1b5e20; }
        .test-error { background: #b71c1c; }
        .test-pending { background: #f57c00; }
        h1 { color: #007acc; text-align: center; margin: 0; }
        h2 { color: #4ec9b0; margin-top: 0; }
        h3 { color: #9cdcfe; }
        .status-indicator { display: inline-block; width: 12px; height: 12px; border-radius: 50%; margin-right: 10px; }
        .status-online { background: #4caf50; }
        .status-offline { background: #f44336; }
        .status-warning { background: #ff9800; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üîç DIAGNOSTIC DU SYST√àME DE ROUTAGE</h1>
            <p><strong>URL actuelle :</strong> <span id="current-url"></span></p>
            <p><strong>Timestamp :</strong> <span id="timestamp"></span></p>
        </div>

        <div class="section success">
            <h2>‚úÖ CONFIGURATION VERCEL</h2>
            <div class="code">
<pre>{
  "rewrites": [
    {
      "source": "/portfolio",
      "destination": "/portfolio.html"
    },
    {
      "source": "/politique-confidentialite",
      "destination": "/privacy-policy.html"
    },
    {
      "source": "/mentions-legales",
      "destination": "/legal-notice.html"
    },
    {
      "source": "/test-routing",
      "destination": "/test-routing.html"
    },
    {
      "source": "/test-routing-fixed",
      "destination": "/test-routing-fixed.html"
    },
    {
      "source": "/routing-diagnostic",
      "destination": "/routing-diagnostic.html"
    },
    {
      "source": "/(.*)",
      "destination": "/index.html"
    }
  ]
}</pre>
            </div>
            <p><span class="status-indicator status-online"></span> Configuration valide - Rewrites uniquement</p>
        </div>

        <div class="section warning">
            <h2>‚ö†Ô∏è PROBL√àMES R√âSOLUS</h2>
            <ul>
                <li><strong>Conflit rewrites/routes :</strong> Supprim√© la section <code>routes</code> qui causait <code>DEPLOYMENT_NOT_FOUND</code></li>
                <li><strong>Duplication :</strong> √âlimin√© les rewrites redondants</li>
                <li><strong>Ordre :</strong> Routes sp√©cifiques avant le catch-all</li>
            </ul>
        </div>

        <div class="section">
            <h2>üß™ TESTS DE ROUTAGE</h2>
            <div id="test-results">
                <div class="test-result test-pending">
                    <span class="status-indicator status-warning"></span>
                    <strong>Test en cours...</strong> Cliquez sur les liens ci-dessous pour tester
                </div>
            </div>
            
            <h3>Routes √† Tester :</h3>
            <div class="code">
                <a href="/" style="color: #4ec9b0;">üè† / (Accueil)</a><br>
                <a href="/portfolio" style="color: #4ec9b0;">üìÅ /portfolio</a><br>
                <a href="/politique-confidentialite" style="color: #4ec9b0;">üîí /politique-confidentialite</a><br>
                <a href="/mentions-legales" style="color: #4ec9b0;">‚öñÔ∏è /mentions-legales</a><br>
                <a href="/test-routing" style="color: #4ec9b0;">üß™ /test-routing</a><br>
                <a href="/test-routing-fixed" style="color: #4ec9b0;">üîß /test-routing-fixed</a><br>
                <a href="/routing-diagnostic" style="color: #4ec9b0;">üîç /routing-diagnostic (cette page)</a>
            </div>
        </div>

        <div class="section">
            <h2>üìä STATISTIQUES</h2>
            <div id="stats">
                <p><strong>Routes configur√©es :</strong> 7</p>
                <p><strong>Pages HTML :</strong> 4</p>
                <p><strong>Pages de test :</strong> 3</p>
                <p><strong>Fallback SPA :</strong> Activ√©</p>
            </div>
        </div>

        <div class="section error">
            <h2>üö® ERREURS CONNUES</h2>
            <p><strong>DEPLOYMENT_NOT_FOUND :</strong> R√©solu en supprimant le conflit rewrites/routes</p>
            <p><strong>404 sur navigation :</strong> R√©solu avec le catch-all <code>/(.*)</code></p>
            <p><strong>Liens cass√©s :</strong> Corrig√©s dans la navigation</p>
        </div>

        <div class="section success">
            <h2>‚úÖ SOLUTIONS APPLIQU√âES</h2>
            <ol>
                <li>Suppression de la section <code>routes</code> conflictuelle</li>
                <li>Nettoyage des rewrites redondants</li>
                <li>Ajout du catch-all pour SPA</li>
                <li>Correction des liens de navigation</li>
                <li>Cr√©ation de pages de test</li>
            </ol>
        </div>
    </div>

    <script>
        // Afficher l'URL actuelle et le timestamp
        document.getElementById('current-url').textContent = window.location.href;
        document.getElementById('timestamp').textContent = new Date().toLocaleString('fr-FR');
        
        // Fonction pour tester les routes
        function testRoute(url, description) {
            fetch(url)
                .then(response => {
                    const result = document.createElement('div');
                    result.className = `test-result ${response.ok ? 'test-success' : 'test-error'}`;
                    result.innerHTML = `
                        <span class="status-indicator ${response.ok ? 'status-online' : 'status-offline'}"></span>
                        <strong>${description}</strong> - ${response.ok ? 'OK' : 'ERREUR'} (${response.status})
                    `;
                    document.getElementById('test-results').appendChild(result);
                })
                .catch(error => {
                    const result = document.createElement('div');
                    result.className = 'test-result test-error';
                    result.innerHTML = `
                        <span class="status-indicator status-offline"></span>
                        <strong>${description}</strong> - ERREUR: ${error.message}
                    `;
                    document.getElementById('test-results').appendChild(result);
                });
        }
        
        // Tester les routes principales
        window.addEventListener('load', () => {
            setTimeout(() => {
                testRoute('/', 'Page d\'accueil');
                testRoute('/portfolio', 'Portfolio');
                testRoute('/politique-confidentialite', 'Politique de confidentialit√©');
                testRoute('/mentions-legales', 'Mentions l√©gales');
            }, 1000);
        });
    </script>
</body>
</html>
